let t=!1,e=null,r=null,n=!1,o=!1,i=!1,s=null,a={},u={};const l={x:0,y:0},c="undefined"==typeof document,d=new Set,v=new Map,h={blockPadding:"auto",adsorptionStrength:10,className:"ipad-cursor",normalStyle:{width:"20px",height:"20px",radius:"50%",durationBase:"0.23s",durationPosition:"0s",durationBackdropFilter:"0s",background:"rgba(150, 150, 150, 0.2)",scale:1,border:"1px solid rgba(100, 100, 100, 0.1)",zIndex:9999,backdropBlur:"0px",backdropSaturate:"180%"},textStyle:{background:"rgba(100, 100, 100, 0.3)",scale:1,width:"4px",height:"1.2em",border:"0px solid rgba(100, 100, 100, 0)",durationBackdropFilter:"1s",radius:"10px"},blockStyle:{background:"rgba(100, 100, 100, 0.3)",border:"1px solid rgba(100, 100, 100, 0.05)",backdropBlur:"0px",durationBase:"0.23s",durationBackdropFilter:"0.1s",backdropSaturate:"120%",radius:"10px"},mouseDownStyle:{background:"rgba(150, 150, 150, 0.3)",scale:.8}};class g{static clamp(t,e,r){return Math.min(Math.max(t,e),r)}static isNum(t){return"number"==typeof t||/^\d+$/.test(t)}static getSize(t){return this.isNum(t)?`${t}px`:t}static getDuration(t){return this.isNum(t)?`${t}ms`:`${t}`}static getColor(t){return t}static objectKeys(t){return Object.keys(t)}static style2Vars(t){const e={backdropBlur:"--cursor-bg-blur",backdropSaturate:"--cursor-bg-saturate",background:"--cursor-bg",border:"--cursor-border",durationBackdropFilter:"--cursor-blur-duration",durationBase:"--cursor-duration",durationPosition:"--cursor-position-duration",height:"--cursor-height",radius:"--cursor-radius",scale:"--cursor-scale",width:"--cursor-width",zIndex:"--cursor-z-index"};return this.objectKeys(t).reduce(((r,n)=>{let o=t[n];if(void 0===o)return r;const i=["background","border"].includes(n),s=["width","height","radius","backdropBlur"].includes(n),a=n.startsWith("duration");i&&(o=this.getColor(o)),s&&(o=this.getSize(o)),a&&(o=this.getDuration(o));const u=e[n]||n;return{...r,[u]:o}}),{})}static isMergebleObject(t){return(e=t)&&"object"==typeof e&&!Array.isArray(e);var e}static mergeDeep(t,...e){if(!e.length)return t;const r=e.shift();return r?(this.isMergebleObject(t)&&this.isMergebleObject(r)&&g.objectKeys(r).forEach((e=>{this.isMergebleObject(r[e])?(t[e]||Object.assign(t,{[e]:{}}),this.mergeDeep(t[e],r[e])):Object.assign(t,{[e]:r[e]})})),this.mergeDeep(t,...e)):t}}function p(t,e){r&&("string"==typeof t?(a[t]=e,e&&r.style.setProperty(t,e)):Object.entries(t).forEach((([t,e])=>{r&&r.style.setProperty(t,e),a[t]=e})))}function b(t){l.x=t.clientX,l.y=t.clientY,function(t){var e;if(n||o||!h.enableAutoTextCursor)return;if(t&&1===t.childNodes.length){const r=t.childNodes[0];if(3===r.nodeType&&""!==(null===(e=r.textContent)||void 0===e?void 0:e.trim()))return t.setAttribute("data-cursor","text"),void B(t)}z()}(t.target)}function m(){i||!h.enableMouseDownEffect||n||(i=!0,u={...a},p(g.style2Vars(h.mouseDownStyle||{})))}function f(){if(!i||!h.enableMouseDownEffect||n)return;i=!1;const t=u;p(g.objectKeys(g.style2Vars(h.mouseDownStyle||{})).reduce(((e,r)=>({...e,[r]:t[r]})),{}))}let y=null;const x=()=>{const t=document.elementFromPoint(l.x,l.y),e=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0,view:window});t!==y&&y&&e&&y.dispatchEvent(e),y=t};function w(n){c||t||(n&&S(n),t=!0,window.addEventListener("mousemove",b),window.addEventListener("mousedown",m),window.addEventListener("mouseup",f),window.addEventListener("scroll",x),function(){if(c)return;r=document.createElement("div");const t=document.createElement("div");r.classList.add(h.className),t.classList.add("lighting"),r.appendChild(t),document.body.appendChild(r),z()}(),function(){if(s)return;const t=`.${h.className.split(/\s+/).join(".")}`;s=document.createElement("style"),s.innerHTML=`\n    body, * {\n      cursor: none;\n    }\n    ${t} {\n      --cursor-transform-duration: 0.23s;\n      overflow: hidden;\n      pointer-events: none;\n      position: fixed;\n      left: var(--cursor-x);\n      top: var(--cursor-y);\n      width: var(--cursor-width);\n      height: var(--cursor-height);\n      border-radius: var(--cursor-radius);\n      background-color: var(--cursor-bg);\n      border: var(--cursor-border);\n      z-index: var(--cursor-z-index);\n      font-size: var(--cursor-font-size);\n      backdrop-filter:\n        blur(var(--cursor-bg-blur))\n        saturate(var(--cursor-bg-saturate));\n      transition:\n        width var(--cursor-duration) ease,\n        height var(--cursor-duration) ease,\n        border-radius var(--cursor-duration) ease,\n        border var(--cursor-duration) ease,\n        background-color var(--cursor-duration) ease,\n        left var(--cursor-position-duration) ease,\n        top var(--cursor-position-duration) ease,\n        backdrop-filter var(--cursor-blur-duration) ease,\n        transform var(--cursor-transform-duration) ease;\n      transform:\n        translateX(calc(var(--cursor-translateX, 0px) - 50%))\n        translateY(calc(var(--cursor-translateY, 0px) - 50%))\n        scale(var(--cursor-scale, 1));\n    }\n    ${t}.block-active {\n      --cursor-transform-duration: 0s;\n    }\n    ${t} .lighting {\n      display: none;\n    }\n    ${t}.lighting--on .lighting {\n      display: block;\n      width: 0;\n      height: 0;\n      position: absolute;\n      left: calc(var(--lighting-size) / -2);\n      top: calc(var(--lighting-size) / -2);\n      transform: translateX(var(--lighting-offset-x, 0)) translateY(var(--lighting-offset-y, 0));\n      background-image: radial-gradient(\n        circle at center,\n        rgba(255, 255, 255, 0.1) 0%,\n        rgba(255, 255, 255, 0) 30%\n      );\n      border-radius: 50%;\n    }\n    ${t}.block-active .lighting {\n      width: var(--lighting-size, 20px);\n      height: var(--lighting-size, 20px);\n    }\n  `,document.head.appendChild(s)}(),E(),$(),h.enableAutoUpdateCursor&&(e=new MutationObserver((function(){$()})),e.observe(document.body,{childList:!0,subtree:!0})))}function k(){t&&(t=!1,window.removeEventListener("mousemove",b),window.removeEventListener("scroll",x),r&&r.remove(),s&&s.remove(),s=null,r=null,d.forEach((t=>L(t))),null==e||e.disconnect())}function S(t){var e;return"adsorptionStrength"in t&&(h.adsorptionStrength=g.clamp(null!==(e=t.adsorptionStrength)&&void 0!==e?e:10,0,30)),g.mergeDeep(h,t)}function E(){!c&&r&&(n||(p("--cursor-x",`${l.x}px`),p("--cursor-y",`${l.y}px`)),window.requestAnimationFrame(E))}function $(){if(w(),c||!t)return;const e=new Map;(c||!t?[]:document.querySelectorAll("[data-cursor]")).forEach((t=>{e.set(t,!0),d.has(t)||function(t){let e=t.getAttribute("data-cursor");d.add(t),"text"===e&&function(t){let e;function n(t){o=!!t,r&&(t?r.classList.add("text-active"):r.classList.remove("text-active"))}function i(t){e&&clearTimeout(e),n(!0),e=setTimeout((()=>n(!0))),B(t.target)}function s(){e&&clearTimeout(e),e=setTimeout((()=>n(!1))),z()}t.addEventListener("mouseover",i,{passive:!0}),t.addEventListener("mouseleave",s,{passive:!0}),v.set(t,[{event:"mouseover",handler:i},{event:"mouseleave",handler:s}])}(t);"block"===e?function(t){const e=t;let o;function i(t){n=!!t,r&&(t?r.classList.add("block-active"):r.classList.remove("block-active"))}function s(){var t,n,s;r&&r.classList.toggle("lighting--on",!!h.enableLighting),c(!1);const a=e.getBoundingClientRect();o&&clearTimeout(o),i(!0),o=setTimeout((()=>i(!0))),r&&r.classList.add("block-active");const u={...h.blockStyle||{}};let l=null!==(t=h.blockPadding)&&void 0!==t?t:0,d=null==u?void 0:u.radius;if("auto"===l){const t=Math.min(a.width,a.height);l=Math.max(2,Math.floor(t/25))}if("auto"===d){const t=g.getSize(l),r=window.getComputedStyle(e).borderRadius;d=r.startsWith("0")||"none"===r?"0":`calc(${t} + ${r})`,u.radius=d}p("--cursor-x",`${a.left+a.width/2}px`),p("--cursor-y",`${a.top+a.height/2}px`),p("--cursor-width",`${a.width+2*l}px`),p("--cursor-height",`${a.height+2*l}px`);const v={...u,...C(e)};void 0===v.durationPosition&&(v.durationPosition=null!==(n=v.durationBase)&&void 0!==n?n:null===(s=h.normalStyle)||void 0===s?void 0:s.durationBase),p(g.style2Vars(v)),c(!0),e.style.setProperty("transform","translate(var(--translateX), var(--translateY))")}function a(){var t;n||s();const r=e.getBoundingClientRect(),o=r.height/2,i=(l.y-r.top-o)/o,a=r.width/2,u=(l.x-r.left-a)/a,d=null!==(t=h.adsorptionStrength)&&void 0!==t?t:10;p("--cursor-translateX",u*(r.width/100*d)+"px"),p("--cursor-translateY",i*(r.height/100*d)+"px"),c(!1);const v=u*(r.width/100*d),g=i*(r.height/100*d);if(e.style.setProperty("--translateX",`${v}px`),e.style.setProperty("--translateY",`${g}px`),h.enableLighting){const t=3*Math.max(r.width,r.height)*1.2,e=l.x-r.left,n=l.y-r.top;p("--lighting-size",`${t}px`),p("--lighting-offset-x",`${e}px`),p("--lighting-offset-y",`${n}px`)}}function u(){o&&clearTimeout(o),o=setTimeout((()=>i(!1))),z(),c(!0),e.style.setProperty("transform","translate(0px, 0px)")}function c(t){var r,n,o,i,s,a;const u=t?g.getDuration(null!==(a=null!==(i=null!==(n=null===(r=null==h?void 0:h.blockStyle)||void 0===r?void 0:r.durationPosition)&&void 0!==n?n:null===(o=null==h?void 0:h.blockStyle)||void 0===o?void 0:o.durationBase)&&void 0!==i?i:null===(s=null==h?void 0:h.normalStyle)||void 0===s?void 0:s.durationBase)&&void 0!==a?a:"0.23s"):"";e.style.setProperty("transition",u?`all ${u} cubic-bezier(.58,.09,.46,1.46)`:"none")}e.addEventListener("mouseenter",s,{passive:!0}),e.addEventListener("mousemove",a,{passive:!0}),e.addEventListener("mouseleave",u,{passive:!0}),v.set(e,[{event:"mouseenter",handler:s},{event:"mousemove",handler:a},{event:"mouseleave",handler:u}])}(t):d.delete(t)}(t)})),d.forEach((t=>{e.has(t)||L(t)}))}function L(t){var e;d.delete(t),null===(e=v.get(t))||void 0===e||e.forEach((({event:e,handler:r})=>{"mouseleave"===e&&r(),t.removeEventListener(e,r)})),v.delete(t),t.style.setProperty("transform","none")}function C(t){const e=t.getAttribute("data-cursor-style"),r={};return e&&e.split(/(;)/).forEach((t=>{const[e,n]=t.split(":").map((t=>t.trim()));r[e]=n})),r}function z(){var t;"auto"===(null===(t=h.normalStyle)||void 0===t?void 0:t.radius)&&(h.normalStyle.radius=h.normalStyle.width),p(g.style2Vars(h.normalStyle||{}))}function B(t){p(g.style2Vars(h.textStyle||{}));p("--cursor-font-size",window.getComputedStyle(t).fontSize),p(g.style2Vars({...h.textStyle,...C(t)}))}function M(t){return Object.entries(t).map((([t,e])=>`${t}: ${e}`)).join("; ")}function j(){n=!1,o=!1,z()}const P={TEXT:"text",BLOCK:"block"},T={CursorType:P,resetCursor:j,initCursor:w,updateCursor:$,disposeCursor:k,updateConfig:S,customCursorStyle:M};export{P as CursorType,M as customCursorStyle,T as default,k as disposeCursor,w as initCursor,j as resetCursor,S as updateConfig,$ as updateCursor};
